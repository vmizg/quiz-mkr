<div class="flex flex-col gap-2 pb-12 justify-stretch w-full max-w-4xl">
  <app-card-header icon="house">
    <ng-container titleContent>
      Hey, stranger <sl-icon name="emoji-smile"></sl-icon>
    </ng-container>
    <ng-container suffixContent>
      <sl-badge class="m-auto">{{ currentDate | date: 'mediumTime' }}</sl-badge>
    </ng-container>
  </app-card-header>
  <div class="flex flex-col gap-2">
    <sl-card *ngIf="inProgress.length > 0">
      <div slot="header" class="font-semibold">Assessments in progress</div>
      <div class="flex flex-col gap-4">
        <div *ngIf="loadingInProgress" class="flex flex-row items-center gap-2">
          <sl-spinner></sl-spinner>
          <span>Loading...</span>
        </div>
        <div *ngFor="let asm of inProgress; let i = index" class="flex flex-row items-center gap-2">
          <sl-icon name="record-circle" style="color: var(--sl-color-amber-500)"></sl-icon>
          <a
            [routerLink]="['/quizzes', asm.quiz.id, 'assessment', asm.id]"
            style="color: var(--sl-color-primary-600)"
            >({{ asm.id }}) {{ asm.quiz.title }}</a
          >
        </div>
      </div>
    </sl-card>
    <sl-card>
      <div slot="header" class="font-semibold">Latest assessment results</div>
      <div class="flex flex-col gap-4">
        <div *ngIf="loadingResults" class="flex flex-row items-center gap-2">
          <sl-spinner></sl-spinner>
          <span>Loading...</span>
        </div>
        <div *ngIf="!loadingResults && results.length === 0" class="flex flex-col text-gray-500">
          <span>You have no recent assessment results.</span>
          <a [routerLink]="['/quizzes']" style="color: var(--sl-color-primary-600)">Start doing quizzes here!</a>
        </div>
        <div *ngFor="let result of results; let i = index" class="flex flex-row justify-between gap-2">
          <div class="flex flex-row items-center gap-2">
            <sl-icon name="check-circle" style="color: var(--sl-color-green-500)"></sl-icon>
            <a [routerLink]="['/results', result.id]" style="color: var(--sl-color-primary-600)">
              {{ result.assessment.quiz.title }}</a
            >
            ({{ result.dateCompleted | date: 'medium' }})
          </div>
          <div>
            <span>SCORE: </span>
            <span class="font-semibold">{{ result.score }}%</span>
            <a
              (click)="handleDeleteResult(result)"
              style="cursor: pointer; margin-left: 1rem; color: var(--sl-color-danger-600)"
              >Clear</a
            >
          </div>
        </div>
      </div>
    </sl-card>
    <sl-card *ngIf="latest.length > 0">
      <div slot="header" class="font-semibold">Latest quizzes</div>
      <div class="flex flex-col gap-4">
        <div *ngIf="loadingLatest" class="flex flex-row items-center gap-2">
          <sl-spinner></sl-spinner>
          <span>Loading...</span>
        </div>
        <div *ngFor="let quiz of latest; let i = index" class="flex flex-row items-center gap-2">
          <sl-icon name="compass" style="color: var(--sl-color-primary-600)"></sl-icon>
          <a [routerLink]="['/quizzes', quiz.id]" style="color: var(--sl-color-primary-600)">{{ quiz.title }}</a>
        </div>
      </div>
    </sl-card>
  </div>
</div>
